(()=>{"use strict";(()=>{const t="http://localhost:3000/todos";async function e(){try{const e=await fetch(t);if(!e.ok)throw new Error("Ошибка при загрузке задач");return await e.json()}catch(t){throw console.error(t),t}}const o=document.querySelector("#todoInput"),n=document.querySelector("#todoBtn"),c=document.querySelector("#todoList");function r(o){c.innerHTML="",o.forEach((o=>{const n=document.createElement("li");n.classList.add("new-todo"),n.textContent=o.title,n.dataset.id=o.id;const a=document.createElement("div"),i=document.createElement("button");i.classList.add("edit-todo"),i.textContent="Редактировать",i.addEventListener("click",(async()=>{const n=prompt("Введите новое название задачи:",o.title);if(n)try{await async function(e,o){const n=await fetch(`${t}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!n.ok)throw new Error("Unable to update todo");return n.json()}(o.id,{title:n}),r(await e())}catch(t){console.error("Ошибка при редактировании задачи:",t)}}));const d=document.createElement("button");d.classList.add("delete-todo"),d.textContent="Удалить",d.addEventListener("click",(async()=>{try{await async function(e){try{if(!(await fetch(`${t}/${e}`,{method:"DELETE"})).ok)throw new Error("Ошибка при удалении задачи")}catch(t){throw console.error(t),t}}(o.id),r(await e())}catch(t){console.error("Ошибка при удалении задачи:",t)}})),n.appendChild(a),a.appendChild(i),a.appendChild(d),c.appendChild(n)}))}document.addEventListener("DOMContentLoaded",(async()=>{try{r(await e())}catch(t){console.error("Ошибка при загрузке задач:",t)}n.addEventListener("click",(async()=>{const n=o.value.trim();if(n)try{await async function(e){try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!o.ok)throw new Error("Ошибка при создании задачи");return await o.json()}catch(t){throw console.error(t),t}}({title:n}),r(await e()),o.value=""}catch(t){console.error("Ошибка при создании задачи:",t)}else alert("Введите текст задачи")}))}))})()})();